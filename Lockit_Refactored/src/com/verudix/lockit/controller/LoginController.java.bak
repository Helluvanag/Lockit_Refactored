package com.verudix.lockit.controller;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;
import org.apache.log4j.Logger;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.servlet.ModelAndView;
import org.springframework.stereotype.Controller;
//import org.springframework.web.bind.annotation.ModelAttribute;
//import org.springframework.web.bind.annotation.RequestMapping;
//import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.servlet.ModelAndView;
import org.springframework.ui.ModelMap;
import com.verudix.lockit.service.LoginService;


@Controller
public class LoginController {
	private LoginService loginService;
	HttpSession session;
	Logger logger = Logger.getLogger(LoginController.class);
	public void setLoginService(LoginService loginService) {
        this.loginService = loginService;
    }
	
		@RequestMapping("/login")
		public ModelAndView loadLogin(HttpServletRequest request, HttpServletResponse response) throws Exception {
	//	logger.debug("Inside loadLogin().html of LoadLoginController------");
	//	logger.info("Inside loadLogin().html of LoadLoginController------");
	//	logger.warn("Inside loadLogin().html of LoadLoginController------");
	//	logger.error("Inside loadLogin().html of LoadLoginController------");
		 return new ModelAndView("login");
	    }
	
	 	@RequestMapping("/lockit_login")
	    public ModelAndView lockit_login(HttpServletRequest request, HttpServletResponse response) throws Exception {
		 String strUser = request.getParameter("email");
		 String strPass = request.getParameter("password");
		 boolean bool = loginService.authenticateUser(request, strUser, strPass);
		 if(bool)
			 return new ModelAndView("dashboard");
		 else
			 return new ModelAndView("login");
	    }
	 	
	/* @RequestMapping(value = "/student", method = RequestMethod.GET)
	   public ModelAndView student() {
	      return new ModelAndView("student", "command", new Student());
	   }
	 @RequestMapping(value = "/addStudent", method = RequestMethod.POST)
	   public String addStudent(@ModelAttribute("SpringWeb")Student student, 
	   ModelMap model) {
	      model.addAttribute("name", student.getName());
	      model.addAttribute("age", student.getAge());
	      model.addAttribute("id", student.getId());
	      return "result";
	   }*/

}
